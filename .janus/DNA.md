# 🧬 JANUS Design DNA (核心设计基因)

> **⚠️ 最高准则：用户至上 & 需求主权 (User First & Requirement Sovereignty)**
> 1. **不可擅改**: 用户提出的、已编码的需求属于“意志锁定”项，AI 禁止以“代码简洁”或“常规逻辑”为由私自修改。
> 2. **确认机制**: 若因性能优化或技术限制确需调整，**必须**征得用户显式许可。
> 3. **矛盾追溯**: 在请求修改时，AI **必须**：
>    - 展示上一次用户的原始需求。
>    - 明确指出当前的优化建议与原需求的矛盾点。
>    - 解释优化的必要性（需提供数据支持）。

---

## 🔒 意志锁定清单 (Immutable Intent)

### 1. FileSensor 监控范围 (Total Workspace Awareness)
- **位置**: `janus_cli.py` 中的 `workspace_root` 定义。
- **状态**: **绝对锁定 (CRITICAL)**。
- **意图**: 必须监听 JANUS 所在的父级目录（通常是 `working` 目录）。
- **理由**: 用户在 `working` 下有多个并行项目（`solar-system`, `jellycut` 等）。JANUS 的定位是“全域环境感知”，必须拥有跨项目的视野。
- **警告**: 禁止将其“优化”为项目根目录。

### 2. L4 记忆分层体系 (Memory Layer Integrity)
- **位置**: `core/memory.py`。
- **状态**: **高度锁定 (HIGH)**。
- **意图**: 必须严格保持 Episodic, Conceptual, Semantic, Preference 的分层。
- **理由**: 这是参考认知科学设计的记忆蒸馏路径。
- **警告**: 禁止为了简化代码而合并层级。

### 3. 免疫系统自愈逻辑 (Self-Healing Immunity)
- **位置**: `core/dispatcher.py` 中的异常处理。
- **状态**: **中度锁定 (MEDIUM)**。
- **意图**: 当动态基因报错时，必须优先触发 `brain_rescue` 而不是抛出异常。
- **理由**: 这是 JANUS 实现生命化自适应的关键。

---

## 🏗️ 演化架构准则 (Evolutionary Architecture)

### 1. 架构代谢 (Architectural Metabolism)
- **准则**: AI 协作模型应持续监控动态技能的健康度。若发现技能出现“臃肿化”趋势（如行数过多、职责过杂），应主动提议重构。
- **解耦意图**: 必须将可复用的通用逻辑（如 API 调用、数据转换、工具函数）从具体业务基因中剥离，形成独立的微型基因（Micro-skills）。
- **重构守则**:
    1. **维持主权**: 解耦行为禁止改变原始功能。
    2. **显性汇报**: 必须展示重构前后的架构对比图或文字说明。
    3. **引用链条**: 被削减的原始技能必须通过 `context.execute_task` 维持对新解耦技能的引用，确保逻辑闭环。

---

## 🛠️ AI 协作规范
1. **防误改注释**: 在修改带有 `[AI-SAFEGUARD]` 标记的代码时，必须解释理由。
2. **健康检查**: 修改后请运行 `health_monitor` 验证设计完整性。
3. **基因演化**: 创建新功能建议通过 `gene_factory` 而非直接硬编码。
